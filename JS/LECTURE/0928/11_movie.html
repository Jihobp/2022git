<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="jq.js"></script>
</head>
<body>
    <!-- ///ctrl enter , script src -->
    <!-- api ì£¼ì†Œ ì…ë ¥ .json?key=dd4d03432f42d84664a096b7f56e413a -->
    <h1>ë°•ìŠ¤ì˜¤í”¼ìŠ¤ íƒ‘ 10</h1>
    <p>ìµœì‹ ì˜í™”</p>
    <div class="boxOffice">     <!--ë°ì´í„°í‹€ì„ ë§Œë“¤ì–´ ë†“ê³  ì´ ì•ˆì—ë‹¤ ì§‘ì–´ ë„£ì–´ì•¼ í•œë‹¤. -->
        <h2 class="boxOfficeType"></h2>
        <p class="showRange"></p>
        <ul class="boxOfficeList"></ul>
    </div>
    <script>
        $(function(){       //$function ì‹œì‘í•˜ìë§ˆì ì§„í–‰í•˜ëŠ”ê±°, bdouyì•ˆì— ìˆëŠ”ê±°.ã…‡ã……ã…‡
            const key = "dd4d03432f42d84664a096b7f56e413a"
            const url = "http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json"       //ì˜í™” ì§„í¥ì› url ë°›ì•„ ì™”ë‹¹.
            const apiurl = `${url}?key=${key}&targetDt=20220927`
            //?ë¬¼ìŒí‘œ ã…‡ã……ã…‡ ê¸°ëŠ¥??
            console.log(apiurl)

            const boxOfficeType = $('.boxOfficeType')
            const showRange = $('.showRange')
            const myUl = $('.boxOfficeList')
        
            $.ajax(
                {
                    url:apiurl,
                    dataType:'json',
                    success:function(result){
                        console.log(result)
                        const jsonObj = result  //ê²°ê³¼ë¥¼ jsonObjì— ì§‘ì–´ë„£ê³ ,
                        const boxOfficeResult = jsonObj['boxOfficeResult']  //ê°ì²´ì— boxOfficeResult ì†ì„±ì„ ê°€ì ¸ì˜¤ëŠ” ê±°ë‹¤.
                        const movieList = boxOfficeResult['dailyBoxOfficeList']
                    
                        boxOfficeType.text(boxOfficeResult['boxofficeType'])
                        showRange.text(boxOfficeResult['showRange'])

                        //ğŸ’šeach ëŠ” jsì˜ forEachë‘ ë˜‘ê°™ì€ ê²ƒ.
                        //each js forEach ë‘ ë˜‘ê°™ì€ê²ƒ. ë§Œë“  ìˆ˜ë§Œí¼ forë¬¸ ë„ëŠ” ê²ƒ?!!! 
                        $(movieList).each(function(index, element){ //íƒœê·¸ ìƒˆë¡œ ë§Œë“¤ì–´ì¤Œ
                            const myLi = $('<li></li>')
                            const myDiv = $('<div></div>')
                            const mh2 = $('<h2></h2>')
                            const mp1 = $('<p></p>')
                            const mp2 = $('<p></p>')
                            const mp3 = $('<p></p>')
                            mh2.text(element['movieNm'])
                            mp1.text('ê°œë´‰ì¼:'+element['openDt'])
                            mp2.text('ëˆ„ì ê´€ê°ìˆ˜:'+element['audiAcc'])
                            mp3.text('ìˆœìœ„ ë³€ë™:'+element['rankInten'])

                                myLi.append(myDiv)      //myLi ì•ˆì—  mydiv ê°€ ìˆê³ ,  ê·¸ì•ˆì— mh2, mp1,mp3ê°€ ìˆë‹¤. ì´ ëª¨ë“ ê±¸ ê°ì‹¸ëŠ”ê²Œ my UL  
                                    myDiv.append(mh2)
                                    myDiv.append(mp1)
                                    myDiv.append(mp2)
                                    myDiv.append(mp3)
                            myUl.append(myLi)

                        })
                        //ë°ì¼ë¦¬ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ë°°ì—´ {} >> {} ì•ˆì— ë°°ì—´ì´ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒ., 

                        
                    },error:()=>{console.log('error')}
                }
            )
        })
    </script>
</body>
</html>